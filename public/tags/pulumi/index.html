<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Pulumi | Home</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/tags/pulumi/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/pulumi/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/pulumi/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/portfolio/" title="Portfólio">
                    <span>Portfólio</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/sobre-mim/" title="Sobre Mim">
                    <span>Sobre Mim</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://rxresu.me/brendo.trindade/resumo" title="Resumo">
                    <span>Resumo</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://linktr.ee/brendo_trindade" title="Linktree">
                    <span>Linktree</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    Pulumi
  </h1>
</header>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="http://localhost:1313/banner/Criando%20um%20Cluster%20EKS%20na%20AWS%20usando%20Pulumi.png" alt="">
</figure>
  <header class="entry-header">
    <h2>Criando um Cluster EKS na AWS usando Pulumi 
    </h2>
  </header>
  <div class="entry-content">
    <p>“Criando um Cluster EKS na AWS usando Pulumi e com deployament de Aplicação” Nesse projeto foram usado as seguintes tecnologias AWS NLB Pulumi Vpc Subnet IGW (internet gateway) Availabillity Zone (AZ) AWS CLI (Conta na AWS com credenciais configuradas localmente) Ec2 Cluster EKS Docker Image Container 1. Definição da VPC e Cluster EKS A seguir o código para definir a Virtual Private Cloud (VPC) e o cluster EKS.
// Importando os pacotes necessários do Pulumi e AWS import * as pulumi from &#34;@pulumi/pulumi&#34;; import * as aws from &#34;@pulumi/aws&#34;; import * as eks from &#34;@pulumi/eks&#34;; import * as awsx from &#34;@pulumi/awsx&#34;; import * as k8s from &#34;@pulumi/kubernetes&#34;; // Criando a Virtual Private Cloud (VPC) usando awsx.ec2.Vpc const vpc = new awsx.ec2.Vpc(&#34;vpc-pulumi&#34;, { numberOfAvailabilityZones: 2, // Definindo o número de zonas de disponibilidade tags: { Name: &#34;pulumi-vpc&#34; }, // Adicionando tags para identificação }); // Criando um cluster Amazon Elastic Kubernetes Service (EKS) usando eks.Cluster const cluster = new eks.Cluster(&#34;cluster-pulumi&#34;, { vpcId: vpc.vpcId, // Especificando o ID da VPC subnetIds: vpc.publicSubnetIds, // Especificando os IDs das sub-redes públicas tags: { Name: &#34;pulumi-cluster&#34; }, // Adicionando tags para identificação desiredCapacity: 2, // Definindo a capacidade desejada do cluster minSize: 2, // Definindo o tamanho mínimo do cluster maxSize: 2, // Definindo o tamanho máximo do cluster storageClasses: &#34;gp2&#34;, // Definindo as classes de armazenamento instanceType: &#34;t2.micro&#34;, // Especificando o tipo de instância }); // Exportando algumas informações úteis do cluster export const clusterName = cluster.core.tags; export const clusterEndpoint = cluster.core.endpoint; export const kubeconfig = cluster.kubeconfig; // Definindo o nome e as labels do aplicativo const name = &#34;fcapp&#34;; const appLabels = { appClass: name }; // Criando um Deployment no Kubernetes para o aplicativo const deployment = new k8s.apps.v1.Deployment(name, { metadata: { labels: appLabels, // Adicionando labels ao Deployment }, spec: { selector: { matchLabels: appLabels }, // Especificando o seletor de labels replicas: 1, // Definindo o número de réplicas template: { metadata: { labels: appLabels, }, spec: { containers: [ { name: name, image: &#34;brendofut/eks-brendo-eks&#34;, // Especificando a imagem do contêiner ports: [{ containerPort: 8080 }], // Expondo a porta 8080 }, ], }, }, }, }); // Criando um Service no Kubernetes para expor o aplicativo const service = new k8s.core.v1.Service(name, { metadata: { labels: appLabels, // Adicionando labels ao Service }, spec: { type: &#34;LoadBalancer&#34;, // Definindo o tipo de Service ports: [{ port: 80, targetPort: 8080 }], // Mapeando a porta 80 para a porta 8080 selector: appLabels, // Especificando o seletor de labels }, }); // Exportando o hostname do serviço para acessar o aplicativo export const serviceHostName = service.status.loadBalancer.ingress[0].hostname; Este código implanta um aplicativo de exemplo com um contêiner que expõe a porta 8080 e um serviço Kubernetes para acessar o aplicativo. 2. Construção e Implantação Após salvar o código, execute os seguintes comandos na linha de comando: pulumi up 3. Trabalhando com Dockerfile Este Dockerfile é utilizado para construir uma imagem Docker baseada na imagem oficial do Node.js versão 14. Ele é usado para criar um ambiente de execução para uma aplicação Node.js.
...</p>
  </div>
  <footer class="entry-footer">&lt;span title=&#39;2023-09-27 21:29:31 -0300 -03&#39;&gt;September 27, 2023&lt;/span&gt;&amp;nbsp;·&amp;nbsp;5 min</footer>
  <a class="entry-link" aria-label="post link to Criando um Cluster EKS na AWS usando Pulumi " href="http://localhost:1313/portf%C3%B3lio/criando-um-cluster-eks-na-aws-usando-pulumi/"></a>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Home</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
